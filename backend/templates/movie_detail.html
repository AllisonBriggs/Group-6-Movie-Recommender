{% extends "layout.html" %}
{% block title %}{{ movie.title }}{% endblock %}

{% block body %}
<head>
    <meta charset="UTF-8">
    <title>{{ movie.title }}</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .movie-container {
            max-width: 900px;
            margin: 40px auto;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        .movie-poster {
            width: 100%;
            max-width: 300px;
            border-radius: 10px;
        }
        .movie-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .movie-details p {
            font-size: 18px;
            margin-bottom: 8px;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            font-size: 16px;
            color: #007bff;
            text-decoration: none;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="movie-container row">
            <!-- Movie Poster on the Left -->
            <div class="col-md-4 text-center">
                {% if movie.poster_url %}
                    <img src="{{ movie.poster_url }}" alt="{{ movie.title }} Poster" class="movie-poster">
                {% else %}
                    <img src="https://via.placeholder.com/300x450?text=No+Image" class="movie-poster">
                {% endif %}
            </div>

            <!-- Movie Details on the Right -->
            <div class="col-md-8">
                <h1 class="movie-title">{{ movie.title }}</h1>
                <p><strong>Genre:</strong> {{ movie.genre }}</p>
                <p><strong>Director:</strong> {{ movie.director }}</p>
                <p><strong>Release Date:</strong> {{ movie.release_date }}</p>
                <p><strong>Rating:</strong> {{ movie.average_rating or "Not Available" }}</p>
                <p><strong>Summary:</strong> {{ movie.summary or "No summary available." }}</p>

                <button id="reviewBtn" onclick="reviewMovie()" class="btn btn-danger">Review Movie</button>

                <div id="inputZone">
                    <!-- New input fields will appear here -->
                </div>

                <script>
                    function reviewMovie(){

                        document.getElementById("reviewBtn").style.display = "none";

                        // Create a new div for the form group
                        let formGroup = document.createElement("div");
                        formGroup.classList.add("form-group", "mb-3");

                        // Create a label
                        let label = document.createElement("label");
                        label.setAttribute("for", "exampleFormControlTextarea");
                        label.textContent = "Leave a Review:";

                        // Create a textarea
                        let textarea = document.createElement("textarea");
                        textarea.classList.add("form-control");
                        textarea.id = "exampleFormControlTextarea";
                        textarea.rows = 3;

                        // Create a remove button
                        let removeBtn = document.createElement("button");
                        removeBtn.classList.add("btn", "btn-danger", "mt-2");
                        removeBtn.textContent = "Delete";
                        removeBtn.onclick = function () {
                            //formGroup.remove();
                        };

                        // Create a remove button
                        let submitBtn = document.createElement("button");
                        submitBtn.classList.add("btn", "btn-primary", "mt-2");
                        submitBtn.textContent = "Submit";
                        submitBtn.onclick = function () {
                            formGroup.remove();
                            window.location.href = "{{ url_for('dashboard') }}";
                        };

                        // Append label, textarea, and remove button to form group
                        formGroup.appendChild(label);
                        formGroup.appendChild(textarea);
                        formGroup.appendChild(removeBtn);
                        formGroup.appendChild(submitBtn);
                        

                        // Append form group to inputZone
                        document.getElementById("inputZone").appendChild(formGroup);
                    }

                </script>
                
                <a href="{{ url_for('dashboard') }}" class="back-link">‚Üê Back to Dashboard</a>
            </div>
        </div>
    </div>
</body>
{% endblock %}
